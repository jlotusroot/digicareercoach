<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Career Coaching Conversation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
    <%- include("partials/header.ejs") %>
    <main>
        <h1>You've selected '<%= data_dev_competency.toLowerCase() %>'</h1>
        <p>Select <strong>exactly three</strong> preferred ways of developing skills in '<%= data_dev_competency.toLowerCase() %>':</p><br/>
        <form id="learningForm" action="./form" method="POST" enctype="application/x-www-form-urlencoded">
            <div class="card">
                <div class="card-header">
                    <strong>Learning from experiences</strong>
                </div>
                <div class="form-check">
                    <% data_learning_70.forEach(item => { %>
                        <label class="form-check-label" for="flexCheck70<%= item.id %>"><input class="form-check-input" type="checkbox" name="answerLearning" id="flexCheck70<%= item.id %>" value="<%= item.title %>"><%= item.title %></label>
                        <br/>
                    <% }) %>
                </div>
            </div>
            <br/>
            <div class="card">
                <div class="card-header">
                    <strong>Learning through interaction with others</strong>
                </div>
                <div class="form-check">
                    <% data_learning_20.forEach(item => { %>
                        <label class="form-check-label" for="flexCheck20<%= item.id %>"><input class="form-check-input" type="checkbox" name="answerLearning" id="flexCheck20<%= item.id %>" value="<%= item.title %>"><%= item.title %></label>
                        <br/>
                    <% }) %>
                </div>
            </div>
            <br/>
            <div class="card">
                <div class="card-header">
                    <strong>Learning through formal training</strong>
                </div>
                <div class="form-check">
                    <% data_learning_10.forEach(item => { %>
                        <label class="form-check-label" for="flexCheck10<%= item.id %>"><input class="form-check-input" type="checkbox" name="answerLearning" id="flexCheck10<%= item.id %>" value="<%= item.title %>"><%= item.title %></label>
                        <br/>
                    <% }) %>
                </div>
            </div>
            <br/>
            <p id="alertOnCheckbox">Please select exactly 3 checkboxes.</p>
            <button type="submit" class="btn btn-info" disabled>Next</button>
        </form>  
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            //function to update button state based on checked checkboxes
            function updateButtonState() {
                var checkedCheckboxes = document.querySelectorAll('input[name="answerLearning"]:checked');
                var submitButton = document.querySelector('button[type="submit"]');
                //Enable the button if exactly 3 checkboxes are checked, otherwise disable it
                submitButton.disabled = checkedCheckboxes.length !== 3;
            }

            //attach event listeners to all checkboxes
            var checkboxes = document.querySelectorAll ('input[name="answerLearning"]');
            checkboxes.forEach(function(checkbox) {
                checkbox.addEventListener('change', updateButtonState);
            });

            //initial call to set the initial button state
            updateButtonState();
        });
    </script>
</body>
</html>